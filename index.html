<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Munições - Calculadora</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #111827;
            color: white;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            margin-bottom: 0.5rem;
        }

        .header p {
            color: #9CA3AF;
        }

        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
        }

        .tab-container {
            background-color: #1F2937;
            border-radius: 0.5rem;
            padding: 0.25rem;
            display: flex;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .tab-button {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
        }

        .tab-button.active-prices {
            background-color: #059669;
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .tab-button.active-calculator {
            background-color: #EA580C;
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .tab-button.inactive {
            color: #D1D5DB;
            background-color: transparent;
        }

        .tab-button.inactive:hover {
            color: white;
            background-color: #374151;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .section-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .section-header h2 {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }

        .section-header.prices h2 {
            color: #10B981;
        }

        .section-header.calculator h2 {
            color: #F97316;
        }

        .section-header p {
            color: #D1D5DB;
        }

        .card-grid {
            display: grid;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .card {
            background-color: #1F2937;
            border-radius: 0.5rem;
            padding: 1.5rem;
            border: 1px solid #374151;
            transition: border-color 0.2s;
        }

        .card:hover {
            border-color: #4B5563;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: bold;
        }

        .card-title.prices {
            color: #10B981;
        }

        .card-title.calculator {
            color: #F97316;
        }

        .package-info {
            background-color: #374151;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.875rem;
            color: #9CA3AF;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: #D1D5DB;
        }

        .form-label.green {
            color: #34D399;
        }

        .form-label.red {
            color: #F87171;
        }

        .form-input {
            width: 100%;
            padding: 0.5rem 0.75rem;
            background-color: #374151;
            border: 1px solid #4B5563;
            border-radius: 0.375rem;
            color: white;
            transition: all 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #10B981;
            box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);
        }

        .form-input.red-focus:focus {
            border-color: #EF4444;
            box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2);
        }

        .form-input.orange-focus:focus {
            border-color: #F97316;
            box-shadow: 0 0 0 2px rgba(249, 115, 22, 0.2);
        }

        .info-box {
            background-color: rgba(30, 58, 138, 0.5);
            border: 1px solid rgba(59, 130, 246, 0.5);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .info-header h4 {
            font-weight: bold;
            color: #60A5FA;
        }

        .info-text {
            color: #BFDBFE;
            font-size: 0.875rem;
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.75rem;
        }

        .result-card {
            padding: 0.75rem;
            border-radius: 0.375rem;
        }

        .result-card.green {
            background-color: rgba(6, 78, 59, 0.3);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .result-card.red {
            background-color: rgba(127, 29, 29, 0.3);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .result-label {
            font-weight: 500;
        }

        .result-label.green {
            color: #34D399;
        }

        .result-label.red {
            color: #F87171;
        }

        .result-value {
            font-size: 1.25rem;
            font-weight: bold;
        }

        .result-value.green {
            color: #34D399;
        }

        .result-value.red {
            color: #F87171;
        }

        .quantity-info {
            margin-top: 0.5rem;
            font-size: 0.875rem;
            color: #9CA3AF;
        }

        .quantity-info p {
            margin-bottom: 0.25rem;
        }

        .quantity-info .highlight {
            color: #FB923C;
            font-weight: 500;
        }

        .quantity-info .warning {
            color: #FBBF24;
        }

        .total-section {
            background-color: #1F2937;
            border: 2px solid #F97316;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            margin-top: 2rem;
        }

        .total-title {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 1.5rem;
            color: #F97316;
        }

        .total-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .total-card {
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
            border: 1px solid;
        }

        .total-card.green {
            background-color: rgba(6, 78, 59, 0.5);
            border-color: #10B981;
        }

        .total-card.red {
            background-color: rgba(127, 29, 29, 0.5);
            border-color: #EF4444;
        }

        .total-card h4 {
            font-size: 1.125rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .total-card h4.green {
            color: #34D399;
        }

        .total-card h4.red {
            color: #F87171;
        }

        .total-card p {
            font-size: 1.875rem;
            font-weight: bold;
        }

        .total-card p.green {
            color: #34D399;
        }

        .total-card p.red {
            color: #F87171;
        }

        .footer {
            margin-top: 2rem;
            text-align: center;
            font-size: 0.875rem;
            color: #6B7280;
            border-top: 1px solid #374151;
            padding-top: 1rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .tab-button {
                padding: 0.5rem 1rem;
                font-size: 0.875rem;
            }

            .section-header h2 {
                font-size: 1.5rem;
            }

            .card-header {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Sistema de Munições</h1>
            <p>Gerencie preços e calcule valores</p>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <div class="tab-container">
                <button class="tab-button active-prices" onclick="switchTab('prices')">
                    <i data-lucide="dollar-sign"></i>
                    Tabela de Preços
                </button>
                <button class="tab-button inactive" onclick="switchTab('calculator')">
                    <i data-lucide="calculator"></i>
                    Calculadora
                </button>
            </div>
        </div>

        <!-- Price Table Tab -->
        <div id="prices-tab" class="tab-content active">
            <div class="section-header prices">
                <h2>
                    <i data-lucide="dollar-sign"></i>
                    TABELA DE PREÇOS
                </h2>
                <p>Consulte e altere os valores das munições</p>
            </div>

            <div class="card-grid" id="price-cards">
                <!-- Price cards will be generated here -->
            </div>

            <div class="info-box">
                <div class="info-header">
                    <i data-lucide="edit-3"></i>
                    <h4>Informação</h4>
                </div>
                <p class="info-text">
                    Os valores alterados aqui serão automaticamente aplicados na calculadora. 
                    Todos os preços são em milhares (K). Apenas números positivos são aceitos.
                </p>
            </div>
        </div>

        <!-- Calculator Tab -->
        <div id="calculator-tab" class="tab-content">
            <div class="section-header calculator">
                <h2>
                    <i data-lucide="calculator"></i>
                    CALCULADORA
                </h2>
                <p>Calcule o valor total das munições</p>
            </div>

            <div class="card-grid" id="calculator-cards">
                <!-- Calculator cards will be generated here -->
            </div>

            <!-- Total Section -->
            <div class="total-section">
                <h3 class="total-title">TOTAL GERAL</h3>
                <div class="total-grid">
                    <div class="total-card red">
                        <h4 class="red">SEM PARCERIA</h4>
                        <p class="red" id="total-without-partner">0K</p>
                    </div>
                    <div class="total-card green">
                        <h4 class="green">COM PARCERIA</h4>
                        <p class="green" id="total-with-partner">0K</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>💰 Valores em milhares (K) | 🔄 Alterações aplicadas automaticamente | ⚡ Cálculos em tempo real</p>
        </div>
    </div>

    <script>
        // Dados iniciais das munições
        let ammoData = {
            pistola: {
                name: 'PISTOLA|PT|FN',
                packageSize: 100,
                priceWithPartner: 55,
                priceWithoutPartner: 110
            },
            rifle: {
                name: 'FUZIL|RIFLE|G3',
                packageSize: 100,
                priceWithPartner: 36,
                priceWithoutPartner: 72
            },
            smg: {
                name: 'SMG',
                packageSize: 100,
                priceWithPartner: 36,
                priceWithoutPartner: 72
            },
            escopeta: {
                name: 'ESCOPETA|12',
                packageSize: 15,
                priceWithPartner: 82.5,
                priceWithoutPartner: 165
            },
            sniper: {
                name: 'SNIPER',
                packageSize: 15,
                priceWithPartner: 350,
                priceWithoutPartner: 700
            }
        };

        // Quantidades para a calculadora
        let quantities = {
            pistola: 0,
            rifle: 0,
            smg: 0,
            escopeta: 0,
            sniper: 0
        };

        // Funções utilitárias
        function formatCurrency(value) {
            if (value === 0) return '0K';
            return `${value.toLocaleString('pt-BR', { 
                minimumFractionDigits: 0, 
                maximumFractionDigits: 1 
            })}K`;
        }

        function calculatePackages(weapon, quantity) {
            if (!ammoData[weapon] || quantity <= 0) return 0;
            return Math.ceil(quantity / ammoData[weapon].packageSize);
        }

        function calculateTotal(weapon, packages, withPartner) {
            if (!ammoData[weapon] || packages <= 0) return 0;
            const price = withPartner ? ammoData[weapon].priceWithPartner : ammoData[weapon].priceWithoutPartner;
            return packages * price;
        }

        function getTotalOverall(withPartner) {
            return Object.keys(ammoData).reduce((total, weapon) => {
                const packages = calculatePackages(weapon, quantities[weapon]);
                return total + calculateTotal(weapon, packages, withPartner);
            }, 0);
        }

        // Gerenciamento de abas
        function switchTab(tabName) {
            // Atualizar botões
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(btn => {
                btn.className = 'tab-button inactive';
            });

            // Ativar aba selecionada
            const activeButton = event.target.closest('.tab-button');
            if (tabName === 'prices') {
                activeButton.className = 'tab-button active-prices';
            } else {
                activeButton.className = 'tab-button active-calculator';
            }

            // Mostrar/esconder conteúdo
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            document.getElementById(`${tabName}-tab`).classList.add('active');

            // Renderizar conteúdo da aba ativa
            if (tabName === 'prices') {
                renderPriceTable();
            } else {
                renderCalculator();
            }
        }

        // Renderizar tabela de preços
        function renderPriceTable() {
            const container = document.getElementById('price-cards');
            container.innerHTML = '';

            Object.entries(ammoData).forEach(([key, data]) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="card-header">
                        <i data-lucide="package"></i>
                        <h3 class="card-title prices">${data.name}</h3>
                        <span class="package-info">Cada ${data.packageSize} unid.</span>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Tamanho do Pacote:</label>
                            <input type="number" min="1" step="1" value="${data.packageSize}" 
                                   class="form-input" onchange="updatePrice('${key}', 'packageSize', this.value)"
                                   placeholder="Ex: 100">
                        </div>
                        <div class="form-group">
                            <label class="form-label red">Preço S/ Parceria (K):</label>
                            <input type="number" min="0" step="0.5" value="${data.priceWithoutPartner}" 
                                   class="form-input red-focus" onchange="updatePrice('${key}', 'priceWithoutPartner', this.value)"
                                   placeholder="Ex: 110.0">
                        </div>
                        <div class="form-group">
                            <label class="form-label green">Preço C/ Parceria (K):</label>
                            <input type="number" min="0" step="0.5" value="${data.priceWithPartner}" 
                                   class="form-input" onchange="updatePrice('${key}', 'priceWithPartner', this.value)"
                                   placeholder="Ex: 55.0">
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });

            // Inicializar ícones Lucide
            lucide.createIcons();
        }

        // Renderizar calculadora
        function renderCalculator() {
            const container = document.getElementById('calculator-cards');
            container.innerHTML = '';

            Object.entries(ammoData).forEach(([key, data]) => {
                const packages = calculatePackages(key, quantities[key]);
                const totalWithPartner = calculateTotal(key, packages, true);
                const totalWithoutPartner = calculateTotal(key, packages, false);

                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="card-header">
                        <i data-lucide="package"></i>
                        <h3 class="card-title calculator">${data.name}</h3>
                        <span class="package-info">
                            Cada ${data.packageSize} unid. - ${formatCurrency(data.priceWithoutPartner)}/${formatCurrency(data.priceWithPartner)}
                        </span>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Quantidade de Munição:</label>
                            <input type="number" min="0" value="${quantities[key]}" 
                                   class="form-input orange-focus" onchange="updateQuantity('${key}', this.value)"
                                   placeholder="Digite a quantidade">
                            <div class="quantity-info" id="info-${key}">
                                ${quantities[key] > 0 && packages > 0 ? `
                                    <p>Pacotes necessários: <span class="highlight">${packages}</span></p>
                                    <p>Unidades total: <span class="highlight">${packages * data.packageSize}</span></p>
                                    ${packages * data.packageSize > quantities[key] ? 
                                        `<p class="warning">Sobra: ${packages * data.packageSize - quantities[key]} unidades</p>` : ''
                                    }
                                ` : ''}
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="result-grid">
                                <div class="result-card red">
                                    <div class="result-header">
                                        <span class="result-label red">S/ Parceria:</span>
                                        <span class="result-value red">${formatCurrency(totalWithoutPartner)}</span>
                                    </div>
                                </div>
                                <div class="result-card green">
                                    <div class="result-header">
                                        <span class="result-label green">C/ Parceria:</span>
                                        <span class="result-value green">${formatCurrency(totalWithPartner)}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });

            // Atualizar totais gerais
            updateTotals();

            // Inicializar ícones Lucide
            lucide.createIcons();
        }

        // Atualizar preço
        function updatePrice(weapon, field, value) {
            const numericValue = parseFloat(value);
            
            if (isNaN(numericValue) || numericValue < 0) return;
            
            if (field === 'packageSize' && (numericValue < 1 || !Number.isInteger(numericValue))) {
                return;
            }

            ammoData[weapon][field] = field === 'packageSize' ? parseInt(value) : numericValue;
            
            // Atualizar calculadora se estiver ativa
            const calculatorTab = document.getElementById('calculator-tab');
            if (calculatorTab.classList.contains('active')) {
                renderCalculator();
            }
        }

        // Atualizar quantidade
        function updateQuantity(weapon, value) {
            const numericValue = parseInt(value);
            
            if (isNaN(numericValue) || numericValue < 0) {
                quantities[weapon] = 0;
            } else {
                quantities[weapon] = numericValue;
            }

            renderCalculator();
        }

        // Atualizar totais gerais
        function updateTotals() {
            const totalWithPartner = getTotalOverall(true);
            const totalWithoutPartner = getTotalOverall(false);

            document.getElementById('total-with-partner').textContent = formatCurrency(totalWithPartner);
            document.getElementById('total-without-partner').textContent = formatCurrency(totalWithoutPartner);
        }

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            renderPriceTable();
            lucide.createIcons();
        });
    </script>
</body>
</html>
